{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Snake Game</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" defer></script>
    <link rel="icon" type="image/png" href="{% static 'images/snake.png' %}">
  </head>
  <body>
    <div id="hud">
      <div id="top-left">
        <button class="btn-icon" id="change-skin-button">
          <i class="fas fa-paint-brush"></i>
          <span>THAY Äá»”I DA</span>
        </button>
        <button class="btn-icon" id="music-button">
          <i class="fas fa-music"></i>
          <audio id="background-music" src="{% static 'media/sound_snack.mp3' %}" loop></audio>
          <span>Báº­t/Táº¯t</span>
        </button>
      </div>
      <div id="top-right">
        <p>
          <span class="label">Äiá»ƒm sá»‘:</span> <span id="score">0</span>
        </p>
        <p>
          <span class="label">Äiá»ƒm cao nháº¥t:</span> <span id="high-score">0</span>
        </p>
      </div>
    </div>
    <!-- Skin Color Picker Overlay (thay tháº¿ pháº§n báº£ng mÃ u cÅ©) -->
    <div id="skin-picker-overlay" class="hidden">
      <div id="skin-picker-container">
        <h2>Chá»n MÃ u Da Ráº¯n</h2>
        <div class="color-picker">
          <label for="head-color">MÃ u Ä‘áº§u ráº¯n:</label>
          <input type="color" id="head-color" value="#006400" />
        </div>
        <div class="color-picker">
          <label for="body-color">MÃ u thÃ¢n ráº¯n:</label>
          <input type="color" id="body-color" value="#8FBC8F" />
        </div>

        <!-- ThÃªm lá»±a chá»n Gradient -->
        <div class="color-picker">
          <label for="gradient-color-1">MÃ u Gradient 1:</label>
          <input type="color" id="gradient-color-1" value="#74ebd5" />
          <label for="gradient-color-2">MÃ u Gradient 2:</label>
          <input type="color" id="gradient-color-2" value="#9face6" />
        </div>

        <!-- Khu vá»±c xem trÆ°á»›c -->
        <div id="snake-preview">
          <div id="preview-snake-head"></div>
          <div id="preview-snake-body"></div>
        </div>

        <!-- NÃºt Ãp dá»¥ng vÃ  Há»§y -->
        <div class="button-group">
          <button id="apply-skin" class="apply-btn">Ãp Dá»¥ng</button>
          <button id="cancel-skin" class="cancel-btn">Há»§y</button>
        </div>
      </div>
    </div>

    <div id="main-container">
      <header>
        <h1 id="logo">SNAKE.FAKE</h1>
      </header>
      <div id="game-settings">
        <div id="play-area">
          <input type="text" id="player-name" value="{{ username }}" />
          <p id="server-status">MÃ¡y chá»§ ngá»«ng hoáº¡t Ä‘á»™ng</p>
          <div id="play-buttons">
            <button id="single-play-button" class="btn-icon">
              <i class="fas fa-play"></i>
              <span>CHÆ I ÄÆ N</span>
            </button>
            <button id="multi-play-button" class="btn-icon">
              <i class="fas fa-users"></i>
              <span>CHÆ I NHIá»€U NGÆ¯á»œI</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="multi-play-container" class="hidden">
      <div class="multi-play-area">
          <!-- Pháº§n vÃ o phÃ²ng -->
          <div class="join-room">
              <h3>VÃ o phÃ²ng</h3>
              <label for="join-room-code">MÃ£ phÃ²ng:</label>
              <input type="text" id="join-room-code" placeholder="Nháº­p mÃ£ phÃ²ng" />
              <button id="join-room-btn" class="btn-icon">VÃ o phÃ²ng</button>
          </div>
          <!-- Pháº§n táº¡o phÃ²ng -->
          <div class="create-room">
              <h3>Táº¡o phÃ²ng</h3>
              <label for="create-room-name">TÃªn phÃ²ng:</label>
              <input type="text" id="create-room-name" placeholder="Nháº­p tÃªn phÃ²ng" />
              <button id="create-room-btn" class="btn-icon">Táº¡o phÃ²ng</button>
          </div>
          <button id="back-to-main-button" class="btn-icon">
            <i class="fas fa-times"></i> <!-- Icon "X" -->
          </button>
      </div>
    </div>
    

    
    <div id="chat-box">
      <div id="toggle-chat">
        <div class="icon">
            <i class="fas fa-envelope"></i>
        </div>
        <div class="content">
            <strong></strong>
        </div>
      </div>
    
    
      <div class="chat-content hidden" id="chat-content">
        <div id="messages">
           {% comment %} ná»™i dung Ä‘oáº¡n chat á»Ÿ Ä‘Ã¢y {% endcomment %}
        </div>
        <div class="chat-input">
          <form id="chat-form" style="width: 100%; display: flex; gap: 10px;">
              <button type="button" id="emoji-button">
                <i class="fas fa-smile"></i>
              </button>
              <input type="text" id="message-input" placeholder="Enter your message..." autocomplete="off" />
              <button type="submit" id="send-button">
                  <i class="fas fa-paper-plane"></i>
              </button>
          </form>
        </div>
        <div id="emoji-picker" style="display: none;">
          <!-- Cáº£m xÃºc -->
          <span class="emoji" data-emoji="ğŸ˜Š">ğŸ˜Š</span>
          <span class="emoji" data-emoji="ğŸ˜‚">ğŸ˜‚</span>
          <span class="emoji" data-emoji="ğŸ˜">ğŸ˜</span>
          <span class="emoji" data-emoji="ğŸ˜">ğŸ˜</span>
          <span class="emoji" data-emoji="ğŸ˜¢">ğŸ˜¢</span>
          <span class="emoji" data-emoji="ğŸ˜¡">ğŸ˜¡</span>
          <span class="emoji" data-emoji="ğŸ˜œ">ğŸ˜œ</span>
          <span class="emoji" data-emoji="ğŸ˜±">ğŸ˜±</span>
          <span class="emoji" data-emoji="ğŸ¤”">ğŸ¤”</span>
          <span class="emoji" data-emoji="ğŸ¥º">ğŸ¥º</span>
          <span class="emoji" data-emoji="ğŸ¤©">ğŸ¤©</span>
          <span class="emoji" data-emoji="ğŸ¤¯">ğŸ¤¯</span>
          <span class="emoji" data-emoji="ğŸ¥³">ğŸ¥³</span>
      
          <!-- HÃ nh Ä‘á»™ng -->
          <span class="emoji" data-emoji="ğŸ‘‹">ğŸ‘‹</span>
          <span class="emoji" data-emoji="ğŸ‘">ğŸ‘</span>
          <span class="emoji" data-emoji="ğŸ‘">ğŸ‘</span>
          <span class="emoji" data-emoji="ğŸ‘">ğŸ‘</span>
          <span class="emoji" data-emoji="ğŸ’ª">ğŸ’ª</span>
          <span class="emoji" data-emoji="âœ‹">âœ‹</span>
          <span class="emoji" data-emoji="ğŸ––">ğŸ––</span>
      
          <!-- Äá»™ng váº­t -->
          <span class="emoji" data-emoji="ğŸ¶">ğŸ¶</span>
          <span class="emoji" data-emoji="ğŸ±">ğŸ±</span>
          <span class="emoji" data-emoji="ğŸ°">ğŸ°</span>
          <span class="emoji" data-emoji="ğŸ¦">ğŸ¦</span>
          <span class="emoji" data-emoji="ğŸ¯">ğŸ¯</span>
          <span class="emoji" data-emoji="ğŸ­">ğŸ­</span>
          <span class="emoji" data-emoji="ğŸ¼">ğŸ¼</span>
          <span class="emoji" data-emoji="ğŸ¦„">ğŸ¦„</span>
          <span class="emoji" data-emoji="ğŸ¸">ğŸ¸</span>
          <span class="emoji" data-emoji="ğŸµ">ğŸµ</span>
          <span class="emoji" data-emoji="ğŸ¦‰">ğŸ¦‰</span>
      
          <!-- CÃ¡c biá»ƒu tÆ°á»£ng -->
          <span class="emoji" data-emoji="ğŸ”¥">ğŸ”¥</span>
          <span class="emoji" data-emoji="ğŸ’€">ğŸ’€</span>
          <span class="emoji" data-emoji="ğŸ®">ğŸ®</span>
          <span class="emoji" data-emoji="âš”ï¸">âš”ï¸</span>
          <span class="emoji" data-emoji="ğŸ¯">ğŸ¯</span>
          <span class="emoji" data-emoji="ğŸ§ ">ğŸ§ </span>
          <span class="emoji" data-emoji="ğŸ’">ğŸ’</span>
          <span class="emoji" data-emoji="ğŸ†">ğŸ†</span>
          <span class="emoji" data-emoji="ğŸ•¹ï¸">ğŸ•¹ï¸</span>
          <span class="emoji" data-emoji="ğŸ">ğŸ</span>
          <span class="emoji" data-emoji="ğŸ’Œ">ğŸ’Œ</span>
      
          <!-- Biá»ƒu tÆ°á»£ng tÃ¬nh yÃªu -->
          <span class="emoji" data-emoji="â¤ï¸">â¤ï¸</span>
          <span class="emoji" data-emoji="ğŸ’›">ğŸ’›</span>
          <span class="emoji" data-emoji="ğŸ’š">ğŸ’š</span>
          <span class="emoji" data-emoji="ğŸ’™">ğŸ’™</span>
          <span class="emoji" data-emoji="ğŸ’œ">ğŸ’œ</span>
          <span class="emoji" data-emoji="ğŸ’”">ğŸ’”</span>
          <span class="emoji" data-emoji="ğŸ˜˜">ğŸ˜˜</span>
          <span class="emoji" data-emoji="ğŸ¥°">ğŸ¥°</span>
      
          <!-- Thá»±c pháº©m vÃ  Ä‘á»“ uá»‘ng -->
          <span class="emoji" data-emoji="ğŸ”">ğŸ”</span>
          <span class="emoji" data-emoji="ğŸ•">ğŸ•</span>
          <span class="emoji" data-emoji="ğŸŸ">ğŸŸ</span>
          <span class="emoji" data-emoji="ğŸ©">ğŸ©</span>
          <span class="emoji" data-emoji="ğŸº">ğŸº</span>
          <span class="emoji" data-emoji="ğŸ·">ğŸ·</span>
          <span class="emoji" data-emoji="ğŸ¾">ğŸ¾</span>
          <span class="emoji" data-emoji="ğŸ¦">ğŸ¦</span>
          <span class="emoji" data-emoji="ğŸ¥¤">ğŸ¥¤</span>
          <span class="emoji" data-emoji="ğŸ“">ğŸ“</span>
      
          <!-- Thiáº¿t bá»‹ vÃ  Ä‘á»“ cÃ´ng nghá»‡ -->
          <span class="emoji" data-emoji="ğŸ’»">ğŸ’»</span>
          <span class="emoji" data-emoji="ğŸ“±">ğŸ“±</span>
          <span class="emoji" data-emoji="âŒš">âŒš</span>
          <span class="emoji" data-emoji="ğŸ§">ğŸ§</span>
          <span class="emoji" data-emoji="ğŸ“¸">ğŸ“¸</span>
          <span class="emoji" data-emoji="ğŸ’¡">ğŸ’¡</span>
          <span class="emoji" data-emoji="ğŸ”‹">ğŸ”‹</span>
        </div>
      
        
        <i class="fas fa-times close-icon" id="close-chat"></i>
      </div>
    </div>

    
    <div id="bottom-left">
      <button class="btn-icon">
        <i class="fas fa-cog"></i>
        <span>CÃ€I Äáº¶T</span>
      </button>
    </div>
    <div id="settings-menu" class="hidden">
      <div class="settings-content">
        <div class="row">
          <button class="btn-icon">
            <i class="fas fa-gamepad"></i>
            <span>ÄIá»€U KHIá»‚N</span>
          </button>
          <button class="btn-icon">
            <i class="fas fa-question-circle"></i>
            <span>HÆ¯á»šNG DáºªN</span>
          </button>
          <button class="btn-icon">
            <i class="fas fa-language"></i>
            <span>THAY Äá»”I NGÃ”N NGá»®</span>
          </button>
          <button id="leaderboard-button" class="btn-icon">
            <i class="fas fa-trophy"></i>
            <span>Báº¢NG Xáº¾P Háº NG</span>
          </button>
          <div id="control-settings-overlay" class="hidden">
            <div id="control-settings-container">
                <h2>Chá»n thiáº¿t láº­p bá»™ Ä‘iá»u khiá»ƒn cá»§a báº¡n:</h2>
                <div class="control-options">
                    <div class="control-option">
                        <input type="radio" id="control-mouse" name="control-method" value="mouse" checked />
                        <label for="control-mouse">
                            <i class="fas fa-mouse" style="font-size: 50px; color: #4CAF50;"></i>
                            <span>Mouse</span>
                        </label>
                    </div>
                    <div class="control-option">
                        <input type="radio" id="control-keyboard" name="control-method" value="keyboard" />
                        <label for="control-keyboard">
                            <i class="fas fa-keyboard" style="font-size: 50px; color: #f44336;"></i>
                            <span>Keyboard (WASD)</span>
                        </label>
                    </div>
                </div>
                <button id="apply-control-settings" class="apply-btn">Äá»“ng Ã½</button>
                <button id="cancel-control-settings" class="cancel-btn">Há»§y</button>
            </div>
          </div>
        
          <div id="leaderboard-overlay" class="hidden">
            <div id="leaderboard-container">
                <div class="dropdown-container">
                    <label for="timeframe">Chá»n Thá»i Gian:</label>
                    <select id="timeframe" onchange="updateLeaderboard()">
                        <option value="all_time">Táº¥t cáº£ thá»i gian</option>
                        <option value="weekly">HÃ ng tuáº§n</option>
                        <option value="daily">HÃ ng ngÃ y</option>
                    </select>
                </div>
                <h2>Báº£ng Xáº¿p Háº¡ng</h2>
                <table id="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Háº¡ng</th>
                            <th>TÃªn NgÆ°á»i ChÆ¡i</th>
                            <th>Äiá»ƒm Cao</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Ná»™i dung Ä‘Æ°á»£c thÃªm Ä‘á»™ng qua JavaScript -->
                        <span id="current-username" style="display:none;">{{ user.username }}</span>

                    </tbody>
                </table>
              
                <div style="display: flex; justify-content: center; margin-top: 20px;">
                    <button id="close-leaderboard" class="btn-icon">ÄÃ³ng</button>
                </div>
            </div>
          </div>
        
        
        </div>
        <div class="row">
          {% if request.user.is_authenticated %}
            <!-- Hiá»ƒn thá»‹ nÃºt TÃ i khoáº£n vÃ  Logout náº¿u Ä‘Ã£ Ä‘Äƒng nháº­p -->
            <button class="btn-icon" onclick="window.location.href='{% url 'user_info' %}'">
              <i class="fas fa-user"></i>
              <span>TÃ i khoáº£n</span>
            </button>
            <form method="post" action="{% url 'account_logout' %}" >
              {% csrf_token %}
              <button type="submit" class="btn-icon">
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Logout</span>
              </button>
            </form>
          {% else %}
            <!-- Hiá»ƒn thá»‹ "Báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n chÆ°a?" náº¿u chÆ°a Ä‘Äƒng nháº­p -->
            <button class="btn-icon btn-large" onclick="window.location.href='{% url 'account_login' %}'">
              <i class="fas fa-sign-in-alt"></i>
              <span>Báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n chÆ°a?</span>
            </button>
          {% endif %}
        </div>        
      </div>
      <button class="btn-icon" id="close-settings">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    
    <div id="bottom-right"> 
      <button class="btn-icon" id="shareButton">
          <i class="fas fa-share-alt"></i>  <!-- Icon chia sáº» -->
          <span>CHIA Sáºº</span>
      </button>
    </div>
  

    <div id="game-over-screen" class="hidden">
      <div id="stats">
        <h2>Game Over</h2>
        <p>
          Sá»‘ mÃ n Ä‘Ã£ vÆ°á»£t qua: <span id="levels-completed">0</span>
        </p>
        <p>
          Tá»•ng thá»i gian chÆ¡i: <span id="play-time">00:00</span>
        </p>
        <p>
          Äiá»ƒm tá»•ng sá»‘: <span id="final-score">0</span>
        </p>
        <div class="button-group">
          <button id="restart-button" class="btn-icon">
            <i class="fas fa-redo"></i>
            <span>ChÆ¡i láº¡i</span>
          </button>
          <button id="back-button" class="btn-icon">
            <i class="fas fa-arrow-left"></i>
            <span>Trá»Ÿ vá»</span>
          </button>
        </div>
      </div>
    </div>

    <div id="time-remaining" class="time-remaining hidden">00:00</div>
    <div id="level-display" class="level-display hidden">
      MÃ n: <span id="level-number">1</span>
    </div>

  
    <canvas id="gameCanvas" width="800" height="600" style="display: none;"></canvas>
    <script src="{% static 'js/snake.js' %}"></script>
    <script src="{% static 'js/snake_multiplayer.js' %}"></script>
    <script type="text/javascript">
      // JavaScript to manage WebSocket connection and UI interactions
      let chatSocket; // Declare chatSocket in the global scope

      document.addEventListener("DOMContentLoaded", function () {
          const chatBox = document.getElementById("chat-box");
          const toggleChat = document.getElementById("toggle-chat");
          const chatContent = document.getElementById("chat-content");
          const closeChat = document.getElementById("close-chat");
          const messages = document.getElementById("messages");
          const chatForm = document.getElementById("chat-form");
          const messageInput = document.getElementById("message-input");

          // Initialize chatSocket
          const protocol = window.location.protocol === 'https:' ? 'wss://' : 'ws://';
          chatSocket = new WebSocket(`${protocol}${window.location.host}/ws/socket-server/`);
          let username;

          chatSocket.onopen = () => {
              console.log("WebSocket connection established.");
          };

          chatSocket.onmessage = function (e) {
            const data = JSON.parse(e.data);
        
            if (data.type === 'connection_established') {
                username = data.username;
                document.getElementById('player-name').value = username;
            } else if (data.type === 'history') {
                const messages = data.messages;
                const messagesContainer = document.getElementById("messages");
        
                // Hiá»ƒn thá»‹ lá»‹ch sá»­ tin nháº¯n
                messages.reverse().forEach((msg) => {
                    const newMessage = document.createElement("div");
                    newMessage.classList.add("message");
        
                    const avatar = document.createElement("img");
                    avatar.src = msg.avatar || "/static/images/snake.png";
                    avatar.alt = "Avatar";
                    avatar.classList.add("message-avatar");
        
                    const contentDiv = document.createElement("div");
                    contentDiv.classList.add("message-content");
                    contentDiv.innerHTML = `<strong>${msg.username}:</strong> ${msg.message}`;
        
                    newMessage.appendChild(avatar);
                    newMessage.appendChild(contentDiv);
                    messagesContainer.appendChild(newMessage);
                });
            } else if (data.type === 'chat') {
                const toggleChat = document.getElementById('toggle-chat');
                const content = toggleChat.querySelector('.content');
        
                if (content) {
                    content.innerHTML = `<strong>${data.username}:</strong> ${data.message}`;
                }
        
                toggleChat.classList.add('highlight');
                setTimeout(() => {
                    toggleChat.classList.remove('highlight');
                }, 2000);
        
                const newMessage = document.createElement("div");
                newMessage.classList.add("message");
        
                const avatar = document.createElement("img");
                avatar.src = data.avatar;
                avatar.alt = "Avatar";
                avatar.classList.add("message-avatar");
        
                const contentDiv = document.createElement("div");
                contentDiv.classList.add("message-content");
                contentDiv.innerHTML = `<strong>${data.username}:</strong> ${data.message}`;
        
                newMessage.appendChild(avatar);
                newMessage.appendChild(contentDiv);
                messages.appendChild(newMessage);
            }
          };

          chatSocket.onerror = function (error) {
              console.error("WebSocket error: ", error);
          };

          // Chat form submission
          chatForm.addEventListener("submit", (e) => {
              e.preventDefault();
              const message = messageInput.value.trim();
              if (message && chatSocket) {
                  chatSocket.send(JSON.stringify({ message: message }));
                  messageInput.value = "";
              }
          });

          // Toggle chat visibility
          toggleChat.addEventListener("click", () => {
              chatContent.classList.toggle("hidden");
          });

          closeChat.addEventListener("click", () => {
              chatContent.classList.add("hidden");
          });
      });


    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const highScoreElement = document.getElementById('high-score'); // Khai bÃ¡o highScoreElement á»Ÿ Ä‘áº§u
        
            const isUserAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};
            if (isUserAuthenticated) {
                // Láº¥y Ä‘iá»ƒm cao nháº¥t tá»« server khi ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p
                fetch("/get_user_high_score/")
                    .then(response => response.json())
                    .then(data => {
                        highScoreElement.innerText = data.high_score || 0; // Hiá»ƒn thá»‹ Ä‘iá»ƒm cao nháº¥t
                    })
            } else {
                highScoreElement.innerText = 0; // Náº¿u khÃ´ng Ä‘Äƒng nháº­p, Ä‘áº·t vá» 0
            }
        
            // Load and display the high score on page load
            const highScore = localStorage.getItem('highScore');
            if (highScore) {
                highScoreElement.innerText = highScore; // Display the saved high score
            } else {
                highScoreElement.innerText = 0; // Display 0 if there is no saved score
            }
            
            // Clear high score if user is not authenticated
            if (!isUserAuthenticated) {
                localStorage.removeItem('highScore');
                highScoreElement.innerText = 0; // Reset display if user is not logged in
            }
            
        });
        
        
        // Update high score function
        function updateHighScoreDisplay(score) {
            const highScoreElement = document.getElementById('high-score');
            highScoreElement.innerText = score; // Update the display with the latest score
        }
               
        function loadHighScore() {
            const highScoreElement = document.getElementById('high-score'); // Äáº£m báº£o biáº¿n Ä‘Æ°á»£c khá»Ÿi táº¡o trÆ°á»›c khi sá»­ dá»¥ng
            const isUserAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};
        
            if (isUserAuthenticated) {
                fetch("/get_user_high_score/")
                    .then(response => response.json())
                    .then(data => {
                        highScore = data.high_score || 0; // Cáº­p nháº­t biáº¿n highScore
                        highScoreElement.innerText = highScore; // Hiá»ƒn thá»‹ Ä‘iá»ƒm cao nháº¥t
                    })
            } else {
                highScore = localStorage.getItem('highScore') ? parseInt(localStorage.getItem('highScore'), 10) : 0;
                highScoreElement.innerText = highScore;
            }
        }
        
        // Modify saveHighScore function to update display
        function saveHighScore(score) {
            const isUserAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};
            
            if (isUserAuthenticated) {
                // Save to server if authenticated
                fetch("/save_high_score/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": "{{ csrf_token }}",
                    },
                    body: JSON.stringify({ score: score })
                })
                .then(response => response.json())
                .then(data => {
                })
            } else {
                // Save high score in Local Storage if not authenticated
                let highScore = localStorage.getItem("highScore") ? parseInt(localStorage.getItem("highScore"), 10) : 0;
                
                if (score > highScore) {
                    localStorage.setItem("highScore", score); // Save only if the score is higher
                    updateHighScoreDisplay(score); // Update display in the top-right corner
                }
            }
        }
    
    </script>
    <script>
      const sfxPointInstances = [new Audio("{% static 'media/sfx_point.mp3' %}"), new Audio("{% static 'media/sfx_point.mp3' %}"), new Audio("{% static 'media/sfx_point.mp3' %}")];
      const sfxWingInstances = [new Audio("{% static 'media/sfx_wing.mp3' %}"), new Audio("{% static 'media/sfx_wing.mp3' %}"), new Audio("{% static 'media/sfx_wing.mp3' %}")];
      const sfxDie = new Audio("{% static 'media/sfx_die.mp3' %}");
      const sfxSwooshingInstances = [new Audio("{% static 'media/sfx_swooshing.mp3' %}"),new Audio("{% static 'media/sfx_swooshing.mp3' %}"),new Audio("{% static 'media/sfx_swooshing.mp3' %}")];
        sfxDie.addEventListener('canplaythrough', () => {
      }, false);
    </script>

  <script>
        const shareButton = document.getElementById('shareButton');
        shareButton.addEventListener('click', async () => {
          try{
              await navigator.share({
                title: 'SnakeGame',
                text: 'Trang web nÃ y an toÃ n',
                url: 'https://snakegame2.loophole.site'
              });
          }catch(error){

          }
        });
  </script>
  </body>
</html>
